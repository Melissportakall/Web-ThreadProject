{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './Card.css';\nimport ReactDOM from \"react-dom\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Grid, Paper, Typography, Modal, Button, Box, Snackbar, Tabs, Tab } from '@mui/material';\nimport { GoogleMap } from '@react-google-maps/api';\nimport AllEvents from '../AllEvents/AllEvents';\nimport Navbar from '../Navbar/Navbar';\nimport UserCard from '../UserCard/Usercard.jsx';\nconst containerStyle = {\n  width: '100%',\n  height: '400px'\n};\nconst getUserDataFromCookies = () => {\n  const cookies = document.cookie.split('; ');\n  for (let cookie of cookies) {\n    const [key, value] = cookie.split('=');\n    if (key === 'user_data') {\n      return value;\n    }\n  }\n  return null;\n};\nconst MainMenu = () => {\n  _s();\n  const [userData, setUserData] = useState(null);\n  const [interestedCategories, setInterestedCategories] = useState({});\n  const [interestedEvents, setInterestedEvents] = useState([]);\n  const [events, setEvents] = useState([]);\n  const [filteredEvents, setFilteredEvents] = useState([]);\n  const [selectedEvent, setSelectedEvent] = useState(null);\n  const [open, setOpen] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n  const [map, setMap] = useState(null);\n  const fetchCoordinates = address => {\n    const geocoder = new window.google.maps.Geocoder();\n    geocoder.geocode({\n      address: address\n    }, (results, status) => {\n      if (status === 'OK' && results[0]) {\n        const location = results[0].geometry.location;\n        const latLng = {\n          lat: location.lat(),\n          lng: location.lng()\n        };\n        setMarkerPosition(latLng);\n        if (map) {\n          map.panTo(latLng);\n        }\n      } else {\n        console.error('Geocode was not successful for the following reason:', status);\n        setSnackbarMessage('Location not found. Showing default location.');\n        setSnackbarOpen(true);\n      }\n    });\n  };\n  const handleOpen = event => {\n    setSelectedEvent(event);\n    setOpen(true);\n    if (event.location) {\n      fetchCoordinates(event.location);\n    }\n  };\n  const handleClose = () => {\n    setOpen(false);\n    setSelectedEvent(null);\n  };\n  const handleJoin = async () => {\n    if (!selectedEvent) return;\n    try {\n      const userId = getUserDataFromCookies();\n      if (!userId) {\n        console.error(\"User ID bulunamadı.\");\n        setSnackbarMessage(\"Kullanıcı bilgileri bulunamadı. Lütfen giriş yapın.\");\n        setSnackbarOpen(true);\n        return;\n      }\n      const joinedEventsResponse = await fetch(`/get_joined_events`, {\n        method: 'GET',\n        credentials: 'include'\n      });\n      const joinedEventsData = await joinedEventsResponse.json();\n      if (joinedEventsData.events) {\n        const joinedEvents = joinedEventsData.events;\n        const selectedEventDate = new Date(`${selectedEvent.date}T${selectedEvent.time}`);\n        const hasConflict = joinedEvents.some(event => {\n          const eventDate = new Date(`${event.date}T${event.time}`);\n          return eventDate.getTime() === selectedEventDate.getTime();\n        });\n        if (hasConflict) {\n          setSnackbarMessage(\"Aynı tarih ve saatte bir etkinliğiniz zaten mevcut.\");\n          setSnackbarOpen(true);\n          return;\n        }\n      }\n      const joinResponse = await fetch('/join_event', {\n        method: 'POST',\n        body: JSON.stringify({\n          eventId: selectedEvent.id\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const joinData = await joinResponse.json();\n      if (joinData.success) {\n        console.log('Etkinliğe başarıyla katıldınız!');\n        setSnackbarMessage('Etkinliğe başarıyla katıldınız!');\n        setSnackbarOpen(true);\n      } else {\n        console.error('Katılma işlemi başarısız oldu!');\n        setSnackbarMessage('Katılma işlemi başarısız oldu.');\n        setSnackbarOpen(true);\n      }\n      handleClose();\n    } catch (error) {\n      console.error('Hata:', error);\n      setSnackbarMessage('Bir hata oluştu. Lütfen tekrar deneyin.');\n      setSnackbarOpen(true);\n    }\n  };\n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false);\n  };\n  useEffect(() => {\n    if (isLoaded && map && selectedEvent) {\n      var _window$google$maps$m;\n      if ((_window$google$maps$m = window.google.maps.marker) !== null && _window$google$maps$m !== void 0 && _window$google$maps$m.AdvancedMarkerElement) {\n        const marker = new window.google.maps.marker.AdvancedMarkerElement({\n          map,\n          position: markerPosition\n        });\n        return () => {\n          marker.setMap(null);\n        };\n      } else {\n        const marker = new window.google.maps.Marker({\n          map,\n          position: markerPosition\n        });\n        return () => {\n          marker.setMap(null);\n        };\n      }\n    }\n  }, [isLoaded, map, selectedEvent, markerPosition]);\n  useEffect(() => {\n    document.title = 'Main Menu';\n    const fetchUserData = async () => {\n      const userId = getUserDataFromCookies();\n      if (!userId) return;\n      try {\n        const userInfoResponse = await fetch(`/get_user_info?user_id=${userId}`, {\n          method: 'GET',\n          credentials: 'include'\n        });\n        const userInfo = await userInfoResponse.json();\n        if (userInfo.success) {\n          setUserData(userInfo.user);\n          const joinedEventsResponse = await fetch(`/get_joined_events`, {\n            method: 'GET',\n            credentials: 'include'\n          });\n          const joinedEventsData = await joinedEventsResponse.json();\n          if (joinedEventsData.events) {\n            const now = new Date();\n            const pastEvents = joinedEventsData.events.filter(event => {\n              const eventDate = new Date(`${event.date}T${event.time}`);\n              return eventDate < now;\n            });\n            const categoryFrequency = {};\n            pastEvents.forEach(event => {\n              if (event.category) {\n                let categories = [];\n                try {\n                  categories = JSON.parse(event.category);\n                } catch (error) {\n                  categories = event.category.split(',').map(cat => cat.trim());\n                }\n                categories.forEach(category => {\n                  const categoryName = Array.isArray(category) ? category.join(\", \") : category;\n                  categoryFrequency[categoryName] = (categoryFrequency[categoryName] || 0) + 1;\n                });\n              }\n            });\n            if (userInfo.user.interests) {\n              let interestsArray;\n              try {\n                interestsArray = JSON.parse(userInfo.user.interests);\n              } catch (error) {\n                interestsArray = userInfo.user.interests.split(',').map(interest => interest.trim());\n              }\n              interestsArray.forEach(interest => {\n                categoryFrequency[interest] = (categoryFrequency[interest] || 0) + 1;\n              });\n            }\n            console.log(\"Profil kategorileri: \", categoryFrequency);\n            setInterestedCategories(categoryFrequency);\n            const allEventsResponse = await fetch(`/get_all_events`, {\n              method: 'GET',\n              credentials: 'include'\n            });\n            const allEventsData = await allEventsResponse.json();\n            if (allEventsData.events) {\n              const futureEvents = allEventsData.events.filter(event => {\n                const eventDate = new Date(`${event.date}T${event.time}`);\n                return eventDate >= now;\n              });\n              console.log(\"Future events before excluding joined:\", futureEvents);\n              const joinedEventIds = joinedEventsData.events.map(event => event.id);\n              const futureEventsExcludingJoined = futureEvents.filter(event => !joinedEventIds.includes(event.id));\n              console.log(\"Future events after excluding joined:\", futureEventsExcludingJoined);\n              const filteredEvents = futureEventsExcludingJoined.filter(event => {\n                let eventCategories = [];\n                try {\n                  eventCategories = JSON.parse(event.category);\n                } catch {\n                  console.error(`Failed to parse category for event: ${event.event_name}`);\n                }\n                return eventCategories.some(category => categoryFrequency[category]);\n              });\n              setInterestedEvents(filteredEvents);\n            }\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchUserData();\n  }, []);\n  return () => {};\n};\n_s(MainMenu, \"OwA4M3Qcy5allSPH78vz5hi5ZqE=\");\n_c = MainMenu;\nexport default MainMenu;\nvar _c;\n$RefreshReg$(_c, \"MainMenu\");","map":{"version":3,"names":["React","useEffect","useState","ReactDOM","Link","useNavigate","Grid","Paper","Typography","Modal","Button","Box","Snackbar","Tabs","Tab","GoogleMap","AllEvents","Navbar","UserCard","containerStyle","width","height","getUserDataFromCookies","cookies","document","cookie","split","key","value","MainMenu","_s","userData","setUserData","interestedCategories","setInterestedCategories","interestedEvents","setInterestedEvents","events","setEvents","filteredEvents","setFilteredEvents","selectedEvent","setSelectedEvent","open","setOpen","snackbarOpen","setSnackbarOpen","snackbarMessage","setSnackbarMessage","map","setMap","fetchCoordinates","address","geocoder","window","google","maps","Geocoder","geocode","results","status","location","geometry","latLng","lat","lng","setMarkerPosition","panTo","console","error","handleOpen","event","handleClose","handleJoin","userId","joinedEventsResponse","fetch","method","credentials","joinedEventsData","json","joinedEvents","selectedEventDate","Date","date","time","hasConflict","some","eventDate","getTime","joinResponse","body","JSON","stringify","eventId","id","headers","joinData","success","log","handleSnackbarClose","isLoaded","_window$google$maps$m","marker","AdvancedMarkerElement","position","markerPosition","Marker","title","fetchUserData","userInfoResponse","userInfo","user","now","pastEvents","filter","categoryFrequency","forEach","category","categories","parse","cat","trim","categoryName","Array","isArray","join","interests","interestsArray","interest","allEventsResponse","allEventsData","futureEvents","joinedEventIds","futureEventsExcludingJoined","includes","eventCategories","event_name","_c","$RefreshReg$"],"sources":["/Users/melisportakal/Desktop/proje-son/src/Components/MainMenu/MainMenu.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './Card.css';\nimport ReactDOM from \"react-dom\";\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Grid, Paper, Typography, Modal, Button, Box, Snackbar, Tabs, Tab } from '@mui/material';\nimport { GoogleMap } from '@react-google-maps/api';\nimport AllEvents from '../AllEvents/AllEvents';\nimport Navbar from '../Navbar/Navbar';\nimport UserCard from '../UserCard/Usercard.jsx'\n\nconst containerStyle = {\n  width: '100%',\n  height: '400px',\n};\n\nconst getUserDataFromCookies = () => {\n  const cookies = document.cookie.split('; ');\n  for (let cookie of cookies) {\n    const [key, value] = cookie.split('=');\n    if (key === 'user_data') {\n      return value;\n    }\n  }\n  return null;\n};\n\nconst MainMenu = () => {\n  const [userData, setUserData] = useState(null);\n  const [interestedCategories, setInterestedCategories] = useState({});\n  const [interestedEvents, setInterestedEvents] = useState([]);\n  const [events, setEvents] = useState([]);\n  const [filteredEvents, setFilteredEvents] = useState([]);\n  const [selectedEvent, setSelectedEvent] = useState(null);\n  const [open, setOpen] = useState(false);\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\n  const [snackbarMessage, setSnackbarMessage] = useState('');\n  const [map, setMap] = useState(null);\n  \n\n  \n    \n   \n\n  const fetchCoordinates = (address) => {\n    const geocoder = new window.google.maps.Geocoder();\n    geocoder.geocode({ address: address }, (results, status) => {\n      if (status === 'OK' && results[0]) {\n        const location = results[0].geometry.location;\n        const latLng = { lat: location.lat(), lng: location.lng() };\n        setMarkerPosition(latLng);\n        if (map) {\n          map.panTo(latLng);\n        }\n      } else {\n        console.error('Geocode was not successful for the following reason:', status);\n        setSnackbarMessage('Location not found. Showing default location.');\n        setSnackbarOpen(true);\n      }\n    });\n  };\n\n  const handleOpen = (event) => {\n    setSelectedEvent(event);\n    setOpen(true);\n\n    if (event.location) {\n      fetchCoordinates(event.location);\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setSelectedEvent(null);\n  };\n\n  const handleJoin = async () => {\n    if (!selectedEvent) return;\n  \n    try {\n      const userId = getUserDataFromCookies();\n      if (!userId) {\n        console.error(\"User ID bulunamadı.\");\n        setSnackbarMessage(\"Kullanıcı bilgileri bulunamadı. Lütfen giriş yapın.\");\n        setSnackbarOpen(true);\n        return;\n      }\n  \n      const joinedEventsResponse = await fetch(`/get_joined_events`, {\n        method: 'GET',\n        credentials: 'include',\n      });\n      const joinedEventsData = await joinedEventsResponse.json();\n  \n      if (joinedEventsData.events) {\n        const joinedEvents = joinedEventsData.events;\n  \n        const selectedEventDate = new Date(`${selectedEvent.date}T${selectedEvent.time}`);\n        const hasConflict = joinedEvents.some(event => {\n          const eventDate = new Date(`${event.date}T${event.time}`);\n          return eventDate.getTime() === selectedEventDate.getTime();\n        });\n  \n        if (hasConflict) {\n          setSnackbarMessage(\"Aynı tarih ve saatte bir etkinliğiniz zaten mevcut.\");\n          setSnackbarOpen(true);\n          return;\n        }\n      }\n  \n      const joinResponse = await fetch('/join_event', {\n        method: 'POST',\n        body: JSON.stringify({ eventId: selectedEvent.id }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n  \n      const joinData = await joinResponse.json();\n      if (joinData.success) {\n        console.log('Etkinliğe başarıyla katıldınız!');\n        setSnackbarMessage('Etkinliğe başarıyla katıldınız!');\n        setSnackbarOpen(true);\n      } else {\n        console.error('Katılma işlemi başarısız oldu!');\n        setSnackbarMessage('Katılma işlemi başarısız oldu.');\n        setSnackbarOpen(true);\n      }\n  \n      handleClose();\n    } catch (error) {\n      console.error('Hata:', error);\n      setSnackbarMessage('Bir hata oluştu. Lütfen tekrar deneyin.');\n      setSnackbarOpen(true);\n    }\n  };  \n  \n  const handleSnackbarClose = () => {\n    setSnackbarOpen(false);\n  };\n\n  useEffect(() => {\n    if (isLoaded && map && selectedEvent) {\n      if (window.google.maps.marker?.AdvancedMarkerElement) {\n        const marker = new window.google.maps.marker.AdvancedMarkerElement({\n          map,\n          position: markerPosition,\n        });\n\n        return () => {\n          marker.setMap(null);\n        };\n      } else {\n        const marker = new window.google.maps.Marker({\n          map,\n          position: markerPosition,\n        });\n\n        return () => {\n          marker.setMap(null);\n        };\n      }\n    }\n  }, [isLoaded, map, selectedEvent, markerPosition]);\n\n  useEffect(() => {\n    document.title = 'Main Menu';\n\n    const fetchUserData = async () => {\n        const userId = getUserDataFromCookies();\n        if (!userId) return;\n\n        try {\n            const userInfoResponse = await fetch(`/get_user_info?user_id=${userId}`, {\n                method: 'GET',\n                credentials: 'include',\n            });\n            const userInfo = await userInfoResponse.json();\n\n            if (userInfo.success) {\n                setUserData(userInfo.user);\n\n                const joinedEventsResponse = await fetch(`/get_joined_events`, {\n                    method: 'GET',\n                    credentials: 'include',\n                });\n                const joinedEventsData = await joinedEventsResponse.json();\n\n                if (joinedEventsData.events) {\n                    const now = new Date();\n                    const pastEvents = joinedEventsData.events.filter(event => {\n                        const eventDate = new Date(`${event.date}T${event.time}`);\n                        return eventDate < now;\n                    });\n\n                    const categoryFrequency = {};\n\n                    pastEvents.forEach(event => {\n                        if (event.category) {\n                            let categories = [];\n\n                            try {\n                                categories = JSON.parse(event.category);\n                            } catch (error) {\n                                categories = event.category.split(',').map(cat => cat.trim());\n                            }\n\n                            categories.forEach(category => {\n                                const categoryName = Array.isArray(category) ? category.join(\", \") : category;\n\n                                categoryFrequency[categoryName] = (categoryFrequency[categoryName] || 0) + 1;\n                            });\n                        }\n                    });\n\n                    if (userInfo.user.interests) {\n                        let interestsArray;\n\n                        try {\n                            interestsArray = JSON.parse(userInfo.user.interests);\n                        } catch (error) {\n                            interestsArray = userInfo.user.interests.split(',').map(interest => interest.trim());\n                        }\n\n                        interestsArray.forEach(interest => {\n                            categoryFrequency[interest] = (categoryFrequency[interest] || 0) + 1;\n                        });\n                    }\n\n                    console.log(\"Profil kategorileri: \", categoryFrequency);\n\n                    setInterestedCategories(categoryFrequency);\n\n                    const allEventsResponse = await fetch(`/get_all_events`, {\n                      method: 'GET',\n                      credentials: 'include',\n                    });\n                    const allEventsData = await allEventsResponse.json();\n                    \n                    if (allEventsData.events) {\n                      const futureEvents = allEventsData.events.filter(event => {\n                        const eventDate = new Date(`${event.date}T${event.time}`);\n                        return eventDate >= now;\n                      });\n                    \n                      console.log(\"Future events before excluding joined:\", futureEvents);\n                    \n                      const joinedEventIds = joinedEventsData.events.map(event => event.id);\n                    \n                      const futureEventsExcludingJoined = futureEvents.filter(event => !joinedEventIds.includes(event.id));\n                    \n                      console.log(\"Future events after excluding joined:\", futureEventsExcludingJoined);\n                    \n                      const filteredEvents = futureEventsExcludingJoined.filter(event => {\n                        let eventCategories = [];\n                    \n                        try {\n                          eventCategories = JSON.parse(event.category);\n                        } catch {\n                          console.error(`Failed to parse category for event: ${event.event_name}`);\n                        }\n                    \n                        return eventCategories.some(category => categoryFrequency[category]);\n                      });\n                    \n                      setInterestedEvents(filteredEvents);\n                  }                  \n                }\n            }\n        } catch (error) {\n            console.error('Error fetching data:', error);\n        }\n    };\n\n    fetchUserData();\n  }, []);\n\n  return () => {\n    \n\n      \n        \n      \n     \n\n        \n\n      \n   \n  }\n};\n\nexport default MainMenu;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}